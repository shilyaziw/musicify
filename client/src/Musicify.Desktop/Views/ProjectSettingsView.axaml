<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Musicify.Core.ViewModels"
             xmlns:converters="using:Musicify.Desktop.Views"
             x:Class="Musicify.Desktop.Views.ProjectSettingsView"
             x:DataType="vm:ProjectSettingsViewModel">
    
    <ScrollViewer>
        <StackPanel Margin="40" Spacing="24">
            <!-- æ ‡é¢˜ -->
            <StackPanel Spacing="8">
                <TextBlock Text="âš™ï¸ é¡¹ç›®è®¾ç½®" 
                          FontSize="32" 
                          FontWeight="Bold"
                          Foreground="#1F2937" />
                <TextBlock Text="ç¼–è¾‘é¡¹ç›®é…ç½®å’Œæ­Œæ›²è§„æ ¼" 
                          FontSize="16"
                          Foreground="#6B7280" />
            </StackPanel>

            <!-- æˆåŠŸ/é”™è¯¯æ¶ˆæ¯ -->
            <Border Background="#D1FAE5"
                    CornerRadius="8"
                    Padding="16"
                    IsVisible="{Binding SuccessMessage, Converter={x:Static converters:IsNotNullConverter.Instance}}">
                <TextBlock Text="{Binding SuccessMessage}"
                          Foreground="#065F46"
                          TextWrapping="Wrap" />
            </Border>
            
            <Border Background="#FEE2E2"
                    CornerRadius="8"
                    Padding="16"
                    IsVisible="{Binding ErrorMessage, Converter={x:Static converters:IsNotNullConverter.Instance}}">
                <TextBlock Text="{Binding ErrorMessage}"
                          Foreground="#DC2626"
                          TextWrapping="Wrap" />
            </Border>

            <!-- åŸºæœ¬ä¿¡æ¯ -->
            <Border Background="#F9FAFB"
                    CornerRadius="12"
                    Padding="24"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1">
                <StackPanel Spacing="16">
                    <TextBlock Text="åŸºæœ¬ä¿¡æ¯" 
                              FontSize="20" 
                              FontWeight="Bold"
                              Foreground="#1F2937" />
                    
                    <Grid ColumnDefinitions="150,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto">
                        <TextBlock Grid.Row="0" Grid.Column="0" 
                                   Text="é¡¹ç›®åç§°:" 
                                   FontWeight="Bold"
                                   Foreground="#4B5563"
                                   VerticalAlignment="Center" />
                        <TextBox Grid.Row="0" Grid.Column="1" 
                                Text="{Binding ProjectName, Mode=TwoWay}"
                                Watermark="è¯·è¾“å…¥é¡¹ç›®åç§°" />
                        
                        <TextBlock Grid.Row="1" Grid.Column="0" 
                                   Text="æ­Œæ›²ç±»åž‹:" 
                                   FontWeight="Bold"
                                   Foreground="#4B5563"
                                   VerticalAlignment="Center" />
                        <ComboBox Grid.Row="1" Grid.Column="1" 
                                 ItemsSource="{Binding SongTypes}"
                                 SelectedItem="{Binding SongType, Mode=TwoWay}" />
                        
                        <TextBlock Grid.Row="2" Grid.Column="0" 
                                   Text="æ—¶é•¿:" 
                                   FontWeight="Bold"
                                   Foreground="#4B5563"
                                   VerticalAlignment="Center" />
                        <TextBox Grid.Row="2" Grid.Column="1" 
                                Text="{Binding Duration, Mode=TwoWay}"
                                Watermark="ä¾‹: 3åˆ†30ç§’" />
                        
                        <TextBlock Grid.Row="3" Grid.Column="0" 
                                   Text="é£Žæ ¼:" 
                                   FontWeight="Bold"
                                   Foreground="#4B5563"
                                   VerticalAlignment="Center" />
                        <ComboBox Grid.Row="3" Grid.Column="1" 
                                 ItemsSource="{Binding Styles}"
                                 SelectedItem="{Binding Style, Mode=TwoWay}" />
                        
                        <TextBlock Grid.Row="4" Grid.Column="0" 
                                   Text="è¯­è¨€:" 
                                   FontWeight="Bold"
                                   Foreground="#4B5563"
                                   VerticalAlignment="Center" />
                        <ComboBox Grid.Row="4" Grid.Column="1" 
                                 ItemsSource="{Binding Languages}"
                                 SelectedItem="{Binding Language, Mode=TwoWay}" />
                    </Grid>
                </StackPanel>
            </Border>

            <!-- å—ä¼—å®šä½ -->
            <Border Background="#F9FAFB"
                    CornerRadius="12"
                    Padding="24"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1">
                <StackPanel Spacing="16">
                    <TextBlock Text="å—ä¼—å®šä½" 
                              FontSize="20" 
                              FontWeight="Bold"
                              Foreground="#1F2937" />
                    
                    <Grid ColumnDefinitions="150,*" RowDefinitions="Auto,Auto">
                        <TextBlock Grid.Row="0" Grid.Column="0" 
                                   Text="å¹´é¾„æ®µ:" 
                                   FontWeight="Bold"
                                   Foreground="#4B5563"
                                   VerticalAlignment="Center" />
                        <ComboBox Grid.Row="0" Grid.Column="1" 
                                 ItemsSource="{Binding AudienceAges}"
                                 SelectedItem="{Binding AudienceAge, Mode=TwoWay}" />
                        
                        <TextBlock Grid.Row="1" Grid.Column="0" 
                                   Text="æ€§åˆ«å€¾å‘:" 
                                   FontWeight="Bold"
                                   Foreground="#4B5563"
                                   VerticalAlignment="Center" />
                        <ComboBox Grid.Row="1" Grid.Column="1" 
                                 ItemsSource="{Binding AudienceGenders}"
                                 SelectedItem="{Binding AudienceGender, Mode=TwoWay}" />
                    </Grid>
                </StackPanel>
            </Border>

            <!-- ç›®æ ‡å¹³å° -->
            <Border Background="#F9FAFB"
                    CornerRadius="12"
                    Padding="24"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1">
                <StackPanel Spacing="16">
                    <TextBlock Text="ç›®æ ‡å¹³å°" 
                              FontSize="20" 
                              FontWeight="Bold"
                              Foreground="#1F2937" />
                    
                    <StackPanel Spacing="8">
                        <ItemsControl ItemsSource="{Binding Platforms}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <CheckBox Content="{Binding}"
                                             Margin="0,4"
                                             Tag="{Binding}"
                                             Name="PlatformCheckBox" />
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- éŸ³è°ƒ -->
            <Border Background="#F9FAFB"
                    CornerRadius="12"
                    Padding="24"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1">
                <StackPanel Spacing="16">
                    <TextBlock Text="éŸ³è°ƒ" 
                              FontSize="20" 
                              FontWeight="Bold"
                              Foreground="#1F2937" />
                    
                    <TextBox Text="{Binding Tone, Mode=TwoWay}"
                            Watermark="ä¾‹: æ¸©æš–ã€è½»å¿«ã€æ‚²ä¼¤ç­‰"
                            TextWrapping="Wrap"
                            MinHeight="60" />
                </StackPanel>
            </Border>

            <!-- æ“ä½œæŒ‰é’® -->
            <StackPanel Orientation="Horizontal" 
                       HorizontalAlignment="Right" 
                       Spacing="10">
                <Button Content="ðŸ”„ é‡ç½®"
                       Command="{Binding ResetCommand}"
                       Padding="20,10" />
                <Button Content="ðŸ’¾ ä¿å­˜è®¾ç½®"
                       Command="{Binding SaveSettingsCommand}"
                       IsEnabled="{Binding SaveSettingsCommand, Converter={x:Static converters:CommandCanExecuteConverter.Instance}}"
                       Padding="20,10"
                       IsVisible="{Binding IsSaving, Converter={x:Static converters:BoolToInverseConverter.Instance}}" />
                <StackPanel IsVisible="{Binding IsSaving}"
                           Orientation="Horizontal"
                           Spacing="10"
                           VerticalAlignment="Center">
                    <TextBlock Text="æ­£åœ¨ä¿å­˜..." 
                              Foreground="#6B7280" />
                    <ProgressBar IsIndeterminate="True"
                                Width="100"
                                Height="4" />
                </StackPanel>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>
