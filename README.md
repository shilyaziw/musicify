# Musicify - AI 驱动的歌词创作与旋律学习工具

> **版本**: v0.7.5
> **状态**: ✅ 核心功能 + 作曲辅助 + 旋律风格学习
> **定位**: 从歌词到音乐的完整创作辅助工具，支持 Claude Code Skills 增强体验

**核心价值**: 帮助创作者从零完成歌曲创作，支持全类型歌曲、三种创作模式、旋律风格学习，并与 Suno/Tunee 等 AI 音乐平台无缝对接

---

## ⚠️ 产品边界

**Musicify 专注于歌词创作和音乐辅助**，与 Suno/Tunee 等平台互补。

✅ **做什么**:
- 全类型歌词创作 (流行/摇滚/说唱/民谣/电子/古风等)
- 三种创作模式 (教练/快速/混合)
- 🆕 **旋律风格学习** - 基于参考歌曲的 MIDI 分析与风格模仿
- 歌词质量评估与优化
- 押韵检查和优化
- 和弦进行生成
- 旋律提示和五线谱导出
- 导出到 Suno/Tunee 平台

❌ **不做什么**:
- 生成实际音频文件 (交给 Suno/Tunee)
- 专业编曲制作
- 演唱录音
- MV 制作

---

## 🎯 核心功能

### 1. 🎼 旋律风格学习助手 (v0.6.0+) 🆕

**基于参考歌曲的 MIDI 和歌词，学习旋律风格并创作原创旋律**

```bash
/melody-mimic
```

**功能特点**:
- 🔍 **智能音轨识别** - 多维度评分匹配人声音轨
- 📊 **深度特征提取** - 节奏型、音程、调式专业分析
- 🤖 **AI 风格学习** - 生成风格相似的原创旋律
- 📋 **双报告系统** - 旋律特征报告 + 歌词深度分析报告

**支持的调式/音阶** (v0.7.4+):
- 西方调式: 大调、小调、多利亚、混合利底亚、弗里几亚、利底亚
- 中国五声: 宫、商、角、徵、羽
- 其他音阶: 蓝调、和声小调、日本音阶、阿拉伯音阶

**四种创作模式** (v0.7.0+):

| 模式 | 时间投入 | 确认次数 | 适用场景 |
|------|----------|----------|----------|
| ⚡ **快速模式** | 3-8分钟 | 1-2次 | 快速demo、灵感原型 |
| 🎯 **专业模式** | 10-18分钟 | 3-5次 | 专业创作、主题歌曲 |
| 🎓 **教练模式** | 20-35分钟 | 6-10次 | 学习创作、技能提升 |
| 🔧 **专家模式** | 30-60分钟 | 15-25次 | 精品制作、特殊需求 |

### 2. 全类型歌曲支持

支持主流歌曲类型:
- 🎵 **流行** - 主流流行音乐
- 🎸 **摇滚** - 摇滚/朋克风格
- 🎤 **说唱** - Hip-Hop/Rap
- 🎻 **民谣** - 民谣/独立音乐
- 🎹 **电子** - EDM/电子音乐
- 🏮 **古风** - 中国风/古风
- 🎺 **R&B** - 节奏布鲁斯
- 🎷 **爵士** - 爵士乐
- 🤠 **乡村** - 乡村音乐
- 🔥 **金属** - 重金属/金属核

### 3. 三种创作模式

**教练模式 (Coach)** - 100%原创
- AI 引导你思考，逐段创作
- 提问式激发创意
- 质量实时检查
- 适合: 追求原创的创作者

**快速模式 (Express)** - 快速迭代
- AI 直接生成完整歌词
- 基于规格快速输出
- 适合: 快速原型，灵感激发

**混合模式 (Hybrid)** - 平衡效率与原创
- AI 生成框架和关键句
- 用户填充细节
- 适合: 需要结构指引的创作者

### 4. 完整创作流程

从主题到音乐平台的完整工作流:

**歌词创作阶段**:
1. `/spec` - 定义歌曲规格
2. `/theme` - 主题构思
3. `/mood` - 情绪定位
4. `/structure` - 结构设计
5. `/lyrics` - 歌词创作
6. `/rhyme` - 押韵检查
7. `/polish` - 润色优化

**音乐辅助阶段**:
8. `/compose` - 生成和弦进行、旋律提示和五线谱
9. `/melody-mimic` - 🆕 旋律风格学习
10. `/export` - 导出到 Suno/Tunee 等平台

### 5. 专业功能

**歌词功能**:
- ✅ 押韵检查与优化
- ✅ 可唱性检测
- ✅ 意象丰富度分析
- ✅ 情感递进检查

**音乐功能**:
- ✅ 和弦进行生成 (基于音乐理论)
- ✅ 旋律音高提示
- ✅ ABC 格式五线谱导出
- ✅ Suno AI 提示词生成
- ✅ Tunee AI 对话素材包
- ✅ 通用格式导出 (给乐手)

**旋律学习功能** (v0.6.0+):
- ✅ MIDI 文件专业分析
- ✅ 人声音轨智能识别
- ✅ 节奏型/音程/调式分析
- ✅ 双报告系统 (旋律+歌词)
- ✅ 创作成果报告 (可选)
- ✅ 一致性评分系统

---

## 📦 安装

```bash
npm install -g ai-musicify
```

或本地开发:

```bash
git clone https://github.com/wordflowlab/musicify.git
cd musicify
npm install
npm run build
```

### 旋律学习功能依赖 (可选)

如需使用 `/melody-mimic` 功能，需要安装 Python 依赖:

```bash
# 1. 检查 Python 环境
python3 --version

# 2. 安装必需依赖
pip install mido music21 numpy

# 3. 配置 music21（重要！）
python3 -c "from music21 import configure; configure.run()"
```

---

## 🚀 快速开始

### 1. 初始化歌曲项目

```bash
# 交互式选择 AI 助手、歌曲类型、脚本类型
musicify init "我的第一首歌"

cd "我的第一首歌"
```

**支持13个AI编程助手**:
- Claude Code, Cursor, Gemini CLI
- Windsurf, Roo Code, GitHub Copilot
- Qwen Code, OpenCode, Codex CLI
- Kilo Code, Auggie CLI, CodeBuddy, Amazon Q Developer

### 2. 歌词创作流程

```bash
/spec         # 1. 定义歌曲规格
/theme        # 2. 构思核心主题
/mood         # 3. 定位情绪氛围
/structure    # 4. 设计歌曲结构
/lyrics       # 5. 创作歌词（三种模式）
/rhyme        # 6. 押韵检查
/polish       # 7. 润色优化
/compose      # 8. 生成和弦进行
/export       # 9. 导出到平台
```

### 3. 旋律风格学习 (🆕)

```bash
# 1. 准备参考文件
workspace/references/{歌曲名}/
├── {歌曲名}.mid     # MIDI 文件
└── {歌曲名}.txt     # 歌词文件

# 2. 启动旋律学习
/melody-mimic

# 3. Claude 将自动:
#    - 分析 MIDI 文件
#    - 生成旋律特征报告
#    - 生成歌词深度分析报告
#    - 引导创作风格相似的原创作品
```

**歌词文件格式** (兼容 Suno/Tunee):
```
[Verse 1]
三两笔着墨迟迟
不为记事
随手便成诗

[Chorus]
多少往事随风去
化作云烟散
只留一曲探故知
```

---

## 📚 完整命令列表

### 项目管理 (2个)
- `/init <项目名>` - 创建新项目
- `/export` - 智能导出系统

### 歌词创作流程 (8个)
- `/spec` - 定义歌曲规格
- `/theme` - 主题构思
- `/mood` - 情绪定位
- `/structure` - 结构设计
- `/lyrics` - 歌词创作 (交互式选择模式)
- `/fill` - 填充混合模式框架
- `/rhyme` - 押韵检查
- `/polish` - 润色优化

### 音乐辅助功能 (3个)
- `/compose` - 生成和弦进行、旋律提示和五线谱
- `/melody-hint` - 旋律提示 (已集成到 /compose)
- `/melody-mimic` - 🆕 旋律风格学习助手

---

## 🎼 旋律风格学习详解

### 双报告系统 (v0.7.3+)

在创作前，系统会生成两份分析报告:

**报告 1: 旋律特征分析报告** 🎵
- 基本信息（总音符数、音域）
- 调式分析（检测结果、置信度、情感特征）
- 节奏型分布（可视化柱状图）
- 音程分布（大跳、小跳、同度、级进）
- 旋律轮廓（拱形、谷形、连续上行/下行）

**报告 2: 歌词深度分析报告** 📝
- 结构分析（段落划分、字数结构）
- 意象分析（分类、作用）
- 修辞手法分析
- 词曲契合度分析
- 创作启示

### 创作成果报告 (v0.7.5+, 可选)

创作完成后可选择生成:
- 原曲与新作的风格一致性对比
- 结构/风格/旋律适配度评分 (0-100分)
- 创作参数记录
- 优化建议

### 输出文件

```
workspace/output/{new-song-name}/
├── {new-song-name}.txt           # 新歌词
├── {new-song-name}.jianpu        # 简谱
├── {new-song-name}.mid           # MIDI
└── {new-song-name}-创作报告.md   # 创作成果报告（可选）
```

---

## 🏗 架构设计

Musicify 基于三层架构:

```
Markdown指令层 (templates/commands/*.md)
  → 定义AI提示词和工作流程
  → 引导AI如何与用户交互

TypeScript CLI层 (src/cli.ts)
  → 命令行界面
  → 调用Bash脚本

Bash脚本层 (scripts/bash/*.sh)
  → 文件操作和项目管理
  → 输出JSON供AI使用

Skills层 (skills/*.md) 🆕
  → Claude Code 专属增强功能
  → 专业 MIDI 分析和旋律学习
```

### Claude Code Skills 系统

Musicify 提供 4 个专业 Skills:
- `lyrics` - 歌词创作引导助手
- `compose` - 音乐理论与作曲助手
- `melody-gen` - 国风旋律生成助手
- `melody-mimic` - 旋律风格学习助手

---

## 🛣 开发路线图

**Phase 1-3**: ✅ 已完成
- 核心命令实现、三种创作模式
- 用户体验优化、交互式设计
- 音乐辅助集成、Suno/Tunee 对接

**Phase 4: Claude Code Skills** (已完成 ✅ v0.4.0-v0.5.0)
- Skills 系统架构
- 歌词创作引导助手
- 国风旋律生成助手

**Phase 5: 旋律风格学习** (已完成 ✅ v0.6.0-v0.7.5)
- MIDI 专业分析
- 人声音轨智能识别
- 双报告系统
- 多模式确认优化
- 多风格支持
- 创作成果报告

**Phase 6: 增强功能** (规划中 📋)
- 更智能的押韵建议
- 方言支持 (粤语/四川话等)
- 音节统计和节奏对齐
- 可唱性深度分析

**Phase 7: 生态扩展** (未来 🔮)
- 支持更多 AI 音乐平台 (Udio, MusicGen 等)
- 旋律参考库
- 风格化示例库
- 社区分享功能

---

## 📋 版本历史

| 版本 | 日期 | 主要更新 |
|------|------|----------|
| v0.7.5 | 2025-12-19 | 创作成果报告（可选） |
| v0.7.4 | 2025-12-19 | 多风格支持（西方调式、蓝调等） |
| v0.7.3 | 2025-12-19 | 双报告分析系统 |
| v0.7.2 | 2025-12-19 | 歌词格式标准化（Suno/Tunee兼容） |
| v0.7.1 | 2025-12-19 | 简谱生成清理 |
| v0.7.0 | 2025-12-19 | 多模式确认优化系统 |
| v0.6.2 | 2025-12-19 | Claude Code 斜杠命令集成 |
| v0.6.0 | 2025-12-19 | 旋律风格学习助手系统 |
| v0.5.0 | 2025-12-19 | 国风旋律生成系统 |
| v0.4.0 | 2025-12-19 | Claude Code Skill 系统集成 |
| v0.3.0 | 2025-11-01 | 作曲辅助与音乐平台集成 |

详细更新日志请查看 [CHANGELOG.md](./CHANGELOG.md)

---

## 🤝 贡献

欢迎提交 Issue 和 Pull Request!

---

## 📄 License

MIT License

---

## 🙏 致谢

本项目架构参考了 [Scriptify](https://github.com/wordflowlab/scriptify) 项目。

---

**版本**: v0.7.5
**发布日期**: 2025-12-19
**状态**: ✅ 核心功能 + 作曲辅助 + 旋律风格学习完成
