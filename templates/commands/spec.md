---
description: 定义歌曲规格(类型/时长/风格/受众/平台/语言)
scripts:
  sh: ../../scripts/bash/spec.sh
  ps1: ../../scripts/powershell/spec.ps1
---

# /spec - 歌曲规格定义系统 📋

> **核心理念**: 引导用户逐步明确歌曲的核心规格
> **目标**: 完成 spec.json 的填写,为后续创作奠定基础

---

## 第一步: 运行脚本获取状态 ⚠️ 必须执行

### 执行检查

```bash
# AI 操作: 运行脚本
bash scripts/bash/spec.sh
```

### 解析返回结果

脚本会返回 JSON 格式的状态:

- **如果 `action === "update"`**: 已有配置,引导用户更新
- **如果 `action === "create"`**: 首次创建,引导用户填写

---

## 第二步: 确认歌曲类型 ⚠️ 必须执行

### 检查 `song_type` 字段

从第一步返回的 JSON 中检查 `song_type` 字段。

#### 情况 A: 如果 `song_type` 字段**不为空**

说明用户在初始化时已经选择过类型,展示确认界面:

```
╔══════════════════════════════════════════════════════════╗
║                   确认歌曲类型                              ║
╚══════════════════════════════════════════════════════════╝

📋 项目: [项目名称]

在初始化时,你已经选择了歌曲类型: 【[song_type 值]】

请确认:
  1. ✅ 继续使用 "[song_type 值]"
  2. 🔄 重新选择类型

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入 1 或 2:
```

**⚠️ 强制等待机制**: AI **必须停在这里,等待用户输入**。

#### 情况 B: 如果 `song_type` 字段**为空**

展示选择界面:

```
╔══════════════════════════════════════════════════════════╗
║                   选择歌曲类型                              ║
╚══════════════════════════════════════════════════════════╝

请选择歌曲类型:

  1. 🎵 流行 - 主流流行音乐
     特点: 旋律朗朗上口,易传唱

  2. 🎸 摇滚 - 摇滚/朋克风格
     特点: 力量感强,情感直接

  3. 🎤 说唱 - Hip-Hop/Rap
     特点: 韵律密集,节奏感强

  4. 🎻 民谣 - 民谣/独立音乐
     特点: 故事性强,真实细腻

  5. 🎹 电子 - EDM/电子音乐
     特点: 节奏律动,氛围营造

  6. 🏮 古风 - 中国风/古风
     特点: 意象古典,韵味悠长

  7. 🎺 R&B - 节奏布鲁斯
     特点: 律动性强,情感丰富

  8. 🎷 爵士 - 爵士乐
     特点: 即兴自由,复杂和声

  9. 🤠 乡村 - 乡村音乐
     特点: 叙事性强,真挚朴实

  10. 🔥 金属 - 重金属/金属核
      特点: 力量爆发,技巧复杂

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入 1-10 选择类型:
```

**⚠️ 强制等待机制**: AI **必须停在这里,等待用户输入**。

---

## 第三步: 确定时长 ⚠️ 必须执行

**提问**:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⏱️  时长规划

常见歌曲时长:
  • 短视频歌曲: 1-2 分钟 (适合抖音/快手)
  • 标准歌曲: 3-4 分钟 (最常见)
  • 长歌曲: 4-6 分钟 (深度叙事)

请告诉我目标时长:
  格式示例: "3分30秒" 或 "4分钟"

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**⚠️ 强制等待机制**: AI **必须停在这里,等待用户输入**。

---

## 第四步: 确定风格基调 ⚠️ 必须执行

**展示风格选择**:

```
╔══════════════════════════════════════════════════════════╗
║                   选择风格基调                              ║
╚══════════════════════════════════════════════════════════╝

请选择整体风格:

  1. 💖 抒情 - 情感细腻,婉转动人
  2. 🔥 激昂 - 热血燃烧,力量爆发
  3. 🌈 轻快 - 明快活泼,轻松愉悦
  4. 🌧️ 忧郁 - 感伤深沉,情绪低落
  5. 🌸 治愈 - 温暖疗愈,安慰心灵
  6. 💪 燃爆 - 热血沸腾,斗志昂扬
  7. 😌 平静 - 淡然舒缓,宁静致远
  8. 🌟 梦幻 - 虚幻缥缈,想象飞扬
  9. 🎭 其他 (自己描述)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入编号 (1-9):
```

**⚠️ 强制等待机制**: AI **必须停在这里,等待用户输入**。

---

## 第五步: 确定语言 ⚠️ 必须执行

**提问**:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🌍 语言选择

请选择歌词语言:
  1. 中文 (普通话)
  2. 英文
  3. 粤语
  4. 日语
  5. 韩语
  6. 中英混合
  7. 其他

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入编号:
```

**⚠️ 强制等待机制**: AI **必须停在这里,等待用户输入**。

---

## 第六步: 确定目标受众 ⚠️ 必须执行

**提问**:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
👥 目标受众

请告诉我主要受众的:

1. 年龄段 (选择):
   a. 15-20 岁 (青少年)
   b. 20-30 岁 (年轻人)
   c. 30-40 岁 (成熟人群)
   d. 全年龄

2. 性别倾向 (选择):
   a. 女性向
   b. 男性向
   c. 中性/全性别

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入 (如: "b, c" 表示20-30岁,中性):
```

**⚠️ 强制等待机制**: AI **必须停在这里,等待用户输入**。

---

## 第七步: 确定目标平台 ⚠️ 必须执行

**展示平台选择**:

```
╔══════════════════════════════════════════════════════════╗
║                   选择目标平台                              ║
╚══════════════════════════════════════════════════════════╝

请选择发布平台 (可多选):

  🎵 音乐平台:
    1. QQ音乐 - 腾讯音乐,主流平台
    2. 网易云音乐 - 年轻用户,评论活跃
    3. 酷狗音乐 - 下沉市场
    4. Apple Music - 高品质,国际化

  📱 短视频平台:
    5. 抖音 - 最大流量,病毒传播
    6. 快手 - 下沉市场,真实感
    7. B站 - 年轻用户,高质量

  🌏 国际平台:
    8. Spotify - 国际主流
    9. YouTube Music - 全球覆盖

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入编号 (可多选,用逗号分隔,如: "1,2,5"):
```

**⚠️ 强制等待机制**: AI **必须停在这里,等待用户输入**。

---

## 第八步: 汇总确认并保存 ⚠️ 必须执行

**展示完整配置汇总**:

```
╔══════════════════════════════════════════════════════════╗
║                   规格配置汇总                              ║
╚══════════════════════════════════════════════════════════╝

📋 项目名称: [project_name]

📌 基本信息:
  • 类型: [song_type]
  • 时长: [duration]
  • 风格: [style]
  • 语言: [language]

👥 受众定位:
  • 年龄: [audience.age]
  • 性别: [audience.gender]

📺 发布平台:
  • [platform1]
  • [platform2]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

确认以上信息无误?

  1. ✅ 确认保存
  2. 🔄 修改某项

请输入 1 或 2:
```

**⚠️ 强制等待机制**: AI **必须停在这里,等待用户确认**。

### 如果用户选择"1 确认保存"

使用 Write 工具更新 spec.json:

```json
{
  "project_name": "[项目名称]",
  "song_type": "[类型]",
  "duration": "[时长]",
  "style": "[风格]",
  "language": "[语言]",
  "audience": {
    "age": "[年龄]",
    "gender": "[性别]"
  },
  "target_platform": ["平台1", "平台2"],
  "tone": "[补充音调描述]",
  "created_at": "[时间戳]",
  "updated_at": "[当前时间戳]"
}
```

**显示成功消息**:

```
✅ 规格配置已保存!

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📁 配置文件: spec.json

💡 下一步建议:

  1. /theme - 进行主题构思
  2. /mood - 定位情绪氛围

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**任务完成** ✅

---

## 重要提醒 ⚠️

### 等待机制

本流程中有**8个强制等待点**,AI 必须在每个等待点停下来。

### 角色定位

你是**歌曲规格顾问**,你的职责是:
- 📋 引导用户完整填写规格
- 💡 提供专业的建议和说明
- ✅ 确保每个字段都准确填写
- 🚫 不替用户做决定,只提供选项

---

**开始执行第一步** ⬇️

